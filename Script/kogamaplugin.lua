if globalThis:Get("KoGaMa Plugin")==nil and Process.GetName()=="kogama.exe"then local a={...}globalThis:Set("KoGaMa Plugin",true)local b=nil;local c=Process.GetModuleFromName("GameAssembly.dll")local d=Il2Cpp.Primitives;local e={["jump"]=function(f,g)local h=g-f-5;local i=ByteArray(4)d.SetInt(i,h)return i end}local j=function(k,l)if l then return function(...)return Il2Cpp.Runtime.Invoke(k,nil,{...},function(m)print("Error")end)end else return function(n,...)return Il2Cpp.Runtime.Invoke(k,n,{...},function(m)print("Error")end)end end end;local o=function(p,l)if l then return{["get"]=function()return p:GetValueObject(Il2Cpp.Object.FromAny(nil))end,["set"]=function(q)p:StaticSetValue(q)end}else return{["get"]=function(r)return p:GetValueObject(r)end,["set"]=function(r,q)p:SetValue(r,q)end}end end;local s=function()local t=Il2Cpp.Domain.MainDomain;local u=t:AssemblyOpen("UnityEngine.CoreModule.dll")local v=u.Image;local w={}do local x=Il2Cpp.Class.FromName(v,"UnityEngine","Time")local y=x:GetMethodFromName("get_deltaTime",0)w["UnityEngine.Time.get_deltaTime"]=j(y,true)end;do local z=Il2Cpp.Class.FromName(v,"UnityEngine","Application")local A=z:GetMethodFromName("set_targetFrameRate",1)w["UnityEngine.Application.set_targetFrameRate"]=j(A,true)local B=z:GetMethodFromName("get_version",0)w["UnityEngine.Application.get_version"]=j(B,true)end;do local C=Il2Cpp.Class.FromName(v,"UnityEngine","Camera")local D=C:GetMethodFromName("set_aspect",1)local E=C:GetMethodFromName("get_main",0)w["UnityEngine.Application.set_aspect"]=j(D,false)w["UnityEngine.Application.get_main"]=j(E,true)end;do local F=Il2Cpp.Class.FromName(v,"UnityEngine","Sprite")local G=F:GetMethodFromName("Create",3)w["UnityEngine.Sprite.Create"]=j(G,true)local H=F:GetMethodFromName("get_rect",0)w["UnityEngine.Sprite.get_rect"]=j(H,false)local I=F:GetMethodFromName("get_pivot",0)w["UnityEngine.Sprite.get_pivot"]=j(I,false)end;return w end;local J=s()local K=function()local t=Il2Cpp.Domain.MainDomain;local L=t:AssemblyOpen("Assembly-CSharp.dll")local M=L.Image;local w={}do local N=Il2Cpp.Class.FromName(M,"","MVGameControllerBase")local O=N:GetMethodFromName("get_Game",0)w["MVGameControllerBase.get_Game"]=j(O,true)local P=N:GetMethodFromName("get_GameMode",0)w["MVGameControllerBase.get_GameMode"]=j(P,true)local Q=N:GetMethodFromName("get_EditModeUI",0)w["MVGameControllerBase.get_EditModeUI"]=j(Q,true)local R=N:GetMethodFromName("get_WOCM",0)w["MVGameControllerBase.get_WOCM"]=j(R,true)local S=N:GetMethodFromName("get_OperationRequests",0)w["MVGameControllerBase.get_OperationRequests"]=j(S,true)local Q=N:GetMethodFromName("get_PlayModeUI",0)w["MVGameControllerBase.get_PlayModeUI"]=j(Q,true)local T=N:GetMethodFromName("get_MaterialLoader",0)w["MVGameControllerBase.get_MaterialLoader"]=j(T,true)end;do local U=Il2Cpp.Class.FromName(M,"","MaterialLoader")local V=U:GetMethodFromName("SetMainTexture",1)w["MaterialLoader.SetMainTexture"]=j(V,false)local W=U:GetMethodFromName("SetupMaterials",0)w["MaterialLoader.SetupMaterials"]=j(W,false)end;do local X=Il2Cpp.Class.FromName(M,"","MVNetworkGame")local Y=X:GetMethodFromName("get_Peer",0)w["MVNetworkGame.get_Peer"]=j(Y,false)end;do local Z=Il2Cpp.Class.FromName(M,"","TextCommand")local _=Z:GetMethodFromName("NotifyUser",1)w["TextCommand.NotifyUser"]=j(_,true)end;do local a0=Il2Cpp.Class.FromName(M,"","ThemeRepository")local a1=a0:GetMethodFromName("get_Instance",0)local a2=a0:GetMethodFromName("get_CurrentThemeVisualization",0)local a3=a0:GetMethodFromName("DestroyTemporary",1)local a4=a0:GetMethodFromName("CreateTemporaryThemeVisualization",1)w["ThemeRepository.get_Instance"]=j(a1,true)w["ThemeRepository.get_CurrentThemeVisualization"]=j(a2,false)w["ThemeRepository.DestroyTemporary"]=j(a3,false)w["ThemeRepository.CreateTemporaryThemeVisualization"]=j(a4,false)end;do local a5=Il2Cpp.Class.FromName(M,"","Theme")local a6=a5:GetMethodFromName("Activate",0)local a7=a5:GetMethodFromName("Deactivate",0)w["Theme.Activate"]=j(a6,false)w["Theme.Deactivate"]=j(a7,false)end;do local a8=Il2Cpp.Class.FromName(M,"","AvatarEditModeBodyController")local a9=a8:GetFieldFromName("Theme")w["AvatarEditModeBodyController.Theme"]=o(a9,true)end;do local aa=Il2Cpp.Class.FromName(M,"","AwayMonitor")local ab=aa:GetFieldFromName("instance")local ac=aa:GetFieldFromName("idleKickEnabled")w["AwayMonitor.instance"]=o(ab,true)w["AwayMonitor.idleKickEnabled"]=o(ac,false)end;do local ad=Il2Cpp.Class.FromName(M,"","DesktopEditModeController")local ae=ad:GetFieldFromName("contextMenuController")w["DesktopEditModeController.contextMenuController"]=o(ae,false)end;do local af=Il2Cpp.Class.FromName(M,"","ContextMenuController")local ag=af:GetFieldFromName("woID")w["ContextMenuController.woID"]=o(ag,false)end;do local ah=Il2Cpp.Class.FromName(M,"","MVWorldObjectClientManager")local ai=ah:GetMethodFromName("GetWorldObject",1)w["MVWorldObjectClientManager.GetWorldObject"]=j(ai,false)end;do local aj=Il2Cpp.Class.FromName(M,"","MVCubeModelBase")local ak=aj:GetMethodFromName("get_Pid",0)w["MVCubeModelBase.get_Pid"]=j(ak,false)end;do local al=Il2Cpp.Class.FromName(M,"","DesktopPlayModeController")local am=al:GetMethodFromName("GetCrossHair",0)w["DesktopPlayModeController.GetCrossHair"]=j(am,false)end;do local an=Il2Cpp.Class.FromName(M,"","CrossHair")local ao=an:GetFieldFromName("crossHair")w["CrossHair.crossHair"]=o(ao,false)end;do local ap=Il2Cpp.Class.FromName(M,"","CrossHair")local aq=ap:GetFieldFromName("crossHair")w["CrossHair.crossHair"]=o(aq,false)end;return w end;local ar=K()local as=function()local t=Il2Cpp.Domain.MainDomain;local at=t:AssemblyOpen("UnityEngine.UI.dll")local au=at.Image;local w={}do local av=Il2Cpp.Class.FromName(au,"UnityEngine.UI","Image")local aw=av:GetMethodFromName("set_sprite",1)w["UnityEngine.UI.Image.set_sprite"]=j(aw,false)local ax=av:GetMethodFromName("get_sprite",0)w["UnityEngine.UI.Image.get_sprite"]=j(ax,false)end;return w end;local ay=as()local az=function()local t=Il2Cpp.Domain.MainDomain;local aA=t:AssemblyOpen("UnityEngine.UnityWebRequestModule.dll")local aB=aA.Image;local aC=t:AssemblyOpen("UnityEngine.UnityWebRequestTextureModule.dll")local aD=aC.Image;local w={}do local aE=Il2Cpp.Class.FromName(aB,"UnityEngine.Networking","UnityWebRequest")local aF=aE:GetMethodFromName("Get",1)local aG=aE:GetMethodFromName("get_isDone",0)local aH=aE:GetMethodFromName("SendWebRequest",0)local aI=aE:GetMethodFromName("get_downloadHandler",0)w["UnityEngine.Networking.UnityWebRequest.Get"]=j(aF,true)w["UnityEngine.Networking.UnityWebRequest.get_isDone"]=j(aG,false)w["UnityEngine.Networking.UnityWebRequest.SendWebRequest"]=j(aH,false)w["UnityEngine.Networking.UnityWebRequest.get_downloadHandler"]=j(aI,false)end;do local aJ=Il2Cpp.Class.FromName(aB,"UnityEngine.Networking","DownloadHandler")local aK=aJ:GetMethodFromName("get_text",0)w["UnityEngine.Networking.DownloadHandler.get_text"]=j(aK,false)end;do local aL=Il2Cpp.Class.FromName(aD,"UnityEngine.Networking","DownloadHandlerTexture")local aM=aL:GetMethodFromName("GetContent",1)w["UnityEngine.Networking.DownloadHandler.GetContent"]=j(aM,true)end;do local aN=Il2Cpp.Class.FromName(aD,"UnityEngine.Networking","UnityWebRequestTexture")local aO=aN:GetMethodFromName("GetTexture",2)w["UnityEngine.Networking.UnityWebRequestTexture.GetTexture"]=j(aO,true)end;return w end;local aP=az()local aQ=function()local aR=Il2Cpp.ResolveIcall("UnityEngine.QualitySettings::set_vSyncCount")local aS={}aS.Application_set_targetFrameRate=function(q)local aT=d.NewInt(q)J["UnityEngine.Application.set_targetFrameRate"](aT)end;aS.QualitySettings_set_vSyncCount=function(aU)local aV=d.NewInt(aU)local aW=d.GetPointer(aV)Process.Invoke(aR,aW)end;return aS end;local aX=aQ()local aY=function()local aZ=nil;Il2Cpp.RegisterInOneUpdate(function()aZ=J["UnityEngine.Application.get_main"]()end)return function(q)J["UnityEngine.Application.set_aspect"](aZ,d.NewFloat(q))end end;local a_=aY()local b0=function()local b1={ByteArray({0x31,0xC0}),ByteArray({0x89,0x01}),ByteArray({0xFF,0xD1})}local b2=c+0x3C4126;local b3=c+0x2B39D6;return function(b4)if b4 then Process.WriteMemory(b2,b1[1])Process.WriteMemory(b3,b1[1])else Process.WriteMemory(b2,b1[2])Process.WriteMemory(b3,b1[3])end end end;local b5=b0()local b6=function()local b7=c+0x3D3AEB;local b8=c+0x3D3B65;local b9=c+0x2623B0;local ba=c+0x2622F0;local bb=ByteArray({0x90,0x90,0x90,0x90,0x90,0x90,0x90})local bc=ByteArray({0x0F,0x84,0x9C,0x00,0x00,0x00})local bd=ByteArray({0x55,0x8B,0xEC,0x83,0xEC,0x10,0x8B,0xDE,0x8B,0x5B,0x4C,0x8B,0x5B,0x0C,0xFF,0x75,0x14,0x53,0xFF,0x75,0x10,0xFF,0x75,0x0C,0xFF,0x75,0x08,0xE8,0x0,0x0,0x0,0x0,0x83,0xC4,0x20,0xC9,0xC3})local be=Process.Alloc(nil,bd.Length,Process.AllocationType.COMMIT|Process.AllocationType.RESERVE,Process.MemoryProtection.EXECUTE_READWRITE)local bf=be+0x1B;bd:SetFromByteArray(0x1C,e.jump(bf:ToInt(),b9:ToInt()))Process.WriteMemory(be,bd)return function(b4)if b4 then Process.WriteMemory(b7,bb)Process.WriteMemory(b8+1,e.jump(b8:ToInt(),be:ToInt()))else Process.WriteMemory(b7,bc)Process.WriteMemory(b8+1,e.jump(b8:ToInt(),ba:ToInt()))end end end;local bg=b6()local bh=function()local bi={ByteArray({0x8A,0x7F,0x0C}),ByteArray({0xB7,0x01,0x90})}local bj=c+0x351DF4;return function(b4)local bk=nil;if b4 then bk=bi[2]else bk=bi[1]end;Process.WriteMemory(bj,bk)end end;local bl=bh()local bm=function()local bn={ByteArray({0xB8,0x00,0x00,0x00,0x00}),ByteArray({0x89,0x46,0x0C,0x90,0x90}),ByteArray({0xF3,0x0F,0x10,0x45,0x0C}),ByteArray({0xF3,0x0F,0x11,0x46,0x0C})}local b7=c+0x2EF219;local bo=c+0x2EF221;return function(b4,q)if b4 then Il2Cpp.Primitives.SetFloat(bn[1].Pointer+1,q)Process.WriteMemory(b7,bn[1])Process.WriteMemory(bo,bn[2])else Process.WriteMemory(b7,bn[3])Process.WriteMemory(bo,bn[4])end end end;local bp=bm()local bq=function()local br=ByteArray({0x55,0x8B,0xEC,0x8B,0x45,0x08,0x8D,0x15,0x00,0x00,0x00,0x00,0xF3,0x0F,0x7E,0x02,0x8B,0x4A,0x08,0x66,0x0F,0xD6,0x00,0x89,0x48,0x08,0xC9,0xC3,0x90,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00})local b7=c+0x3C7DEB;local bo=c+0x185AF0;local be=Process.Alloc(nil,br.Length,Process.AllocationType.COMMIT|Process.AllocationType.RESERVE,Process.MemoryProtection.EXECUTE_READWRITE)local bs=be+0x1D;local bt=e.jump(b7:ToInt(),be:ToInt())local bu=e.jump(b7:ToInt(),bo:ToInt())d.SetInt(br.Pointer+8,bs:ToInt())Process.WriteMemory(be,br)return function(b4,bv)if b4~=nil then if b4 then Process.WriteMemory(b7+1,bt)else Process.WriteMemory(b7+1,bu)end end;if bv~=nil then d.SetFloat(bs,bv[1])d.SetFloat(bs+4,bv[2])d.SetFloat(bs+8,bv[3])end end end;local bw=bq()local bx=function()local by=Il2Cpp.ResolveIcall("UnityEngine.Screen::SetResolution(System.Int32,System.Int32,UnityEngine.FullScreenMode,System.Int32)")local bz=ByteArray({0x55,0x8B,0xEC,0x8B,0x45,0x08,0x6A,0x00,0xFF,0x70,0x08,0xFF,0x70,0x04,0xFF,0x30,0xE8,0x00,0x00,0x00,0x00,0x83,0xC4,0x16,0xC9,0xC3})local a=ByteArray(12)local be=Process.Alloc(nil,bz.Length,Process.AllocationType.COMMIT|Process.AllocationType.RESERVE,Process.MemoryProtection.EXECUTE_READWRITE)bz:SetFromByteArray(0x11,e.jump(be:ToInt()+0x10,by:ToInt()))Process.WriteMemory(be,bz)return function(bA,bB,bC)local bD=a.Pointer;d.SetInt(bD,bA)d.SetInt(bD+4,bB)d.SetInt(bD+8,bC)Process.Invoke(be,a.Pointer)end end;local bE=bx()local bF=function()local bG=c+0x25A361;local bH={ByteArray({0x90,0xE9}),ByteArray({0x0F,0x84})}return function(b4)if b4 then Process.WriteMemory(bG,bH[1])else Process.WriteMemory(bG,bH[2])end end end;local bI=bF()local bJ=function()local bK=c+0x2C057D;local bH={ByteArray({0xEB}),ByteArray({0x74})}return function(b4)if b4 then Process.WriteMemory(bK,bH[1])else Process.WriteMemory(bK,bH[2])end end end;local bL=bJ()local bM=function()local bN=c+0x4CC02D;local bH={ByteArray({0xEB}),ByteArray({0x74})}return function(b4)if b4 then Process.WriteMemory(bN,bH[1])else Process.WriteMemory(bN,bH[2])end end end;local bO=bM()local bP=function()local bQ=c+0x18170D;local bR=c+0x182094;local bS=c+0x182169;local bT=c+0x182177;local bH={ByteArray({0x90,0x90,0x90}),ByteArray({0x90,0x90,0x90,0x90,0x90,0x90}),ByteArray({0x0F,0x4C,0xF7}),ByteArray({0x0F,0x85,0xFA,0x07,0x00,0x00}),ByteArray({0x0F,0x95,0xC1}),ByteArray({0x0F,0x4C,0xC1})}return function(b4)if b4 then Process.WriteMemory(bQ,bH[1])Process.WriteMemory(bR,bH[2])Process.WriteMemory(bS,bH[1])Process.WriteMemory(bT,bH[1])else Process.WriteMemory(bQ,bH[3])Process.WriteMemory(bR,bH[4])Process.WriteMemory(bS,bH[5])Process.WriteMemory(bT,bH[6])end end end;local bU=bP()local bV=function()local bW=nil;return function()if bW==nil then local bX=Il2Cpp.String.FromAny(J["UnityEngine.Application.get_version"]())bW=tostring(bX.Chars)end;return bW end end;local bY=bV()local bZ=function()return{["FPS"]=function(self)return 1.0/self["get_deltaTime"]()end,["get_deltaTime"]=function()return d.GetFloat(J["UnityEngine.Time.get_deltaTime"]().Unbox)end}end;local b_=bZ()local c0=function()local t=Il2Cpp.Domain.MainDomain;local c1=t:AssemblyOpen("Photon3Unity3D.dll")local c2=c1.Image;local c3=Il2Cpp.Class.FromName(c2,"ExitGames.Client.Photon","PhotonPeer")local c4=c3:GetMethodFromName("get_RoundTripTime",0)local c5=nil;local c6=nil;return function()if c5==nil then c5=ar["MVGameControllerBase.get_Game"]()end;if c6==nil then c6=ar["MVNetworkGame.get_Peer"](c5)end;local c7=Il2Cpp.Runtime.Invoke(c4,c6,{},function(m)print("Error")end)return Il2Cpp.Primitives.GetInt(c7.Unbox)end end;local c8=c0()local c9=function(ca)local cb=Il2Cpp.String(ca)ar["TextCommand.NotifyUser"](cb)end;local cc=function()local cd=c+0x370ABA;local ce=c+0x370A27;local cf=c+0x370ADA;local cg=c+0x370A44;local ch=c+0xAE5EE0;local ci=c+0xAE54D0;local cj=c+0x3707F9;local ck=c+0x3702D2;local bH={ByteArray({0x68,0x00,0x50,0xC3,0x47,0x90}),ByteArray({0x51,0xF3,0x0F,0x11,0x04,0x24}),ByteArray({0x6A,0x00,0x90,0x90,0x90,0x90})}local cl=ByteArray({0x55,0x89,0xE5,0xFF,0x75,0x0C,0xFF,0x75,0x08,0xE8,0x00,0x00,0x00,0x00,0x83,0xC4,0x08,0x68,0xE8,0x03,0x00,0x00,0xFF,0x75,0x08,0xE8,0x00,0x00,0x00,0x00,0x83,0xC4,0x08,0xC9,0xC3})local be=Process.Alloc(nil,cl.Length,Process.AllocationType.COMMIT|Process.AllocationType.RESERVE,Process.MemoryProtection.EXECUTE_READWRITE)local cm=be+0x9;local cn=be+0x19;cl:SetFromByteArray(0xA,e.jump(cm:ToInt(),ch:ToInt()))cl:SetFromByteArray(0x1A,e.jump(cn:ToInt(),ci:ToInt()))local co={e.jump(cj:ToInt(),be:ToInt()),e.jump(ck:ToInt(),be:ToInt()),e.jump(cj:ToInt(),ch:ToInt()),e.jump(ck:ToInt(),ch:ToInt())}Process.WriteMemory(be,cl)return function(b4)if b4 then Process.WriteMemory(cd,bH[1])Process.WriteMemory(ce,bH[1])Process.WriteMemory(cf,bH[3])Process.WriteMemory(cg,bH[3])Process.WriteMemory(cj+1,co[1])Process.WriteMemory(ck+1,co[2])else Process.WriteMemory(cj+1,co[3])Process.WriteMemory(ck+1,co[4])Process.WriteMemory(cd,bH[2])Process.WriteMemory(ce,bH[2])Process.WriteMemory(cf,bH[2])Process.WriteMemory(cg,bH[2])end end end;local cp=cc()local cq=function()return function(b4)local cr=ar["MVGameControllerBase.get_GameMode"]()local cs=d.GetInt(cr.Unbox)if cs~=2 then local n=ar["ThemeRepository.get_Instance"]()local ct=ar["ThemeRepository.get_CurrentThemeVisualization"](n)if ct.Pointer~=Il2Cpp.Pointer.Nil then if b4 then ar["Theme.Activate"](ct)else ar["Theme.Deactivate"](ct)end end else local ct=ar["AvatarEditModeBodyController.Theme"].get()if ct.Pointer~=Il2Cpp.Pointer.Nil then if b4 then ar["Theme.Activate"](ct)else ar["Theme.Deactivate"](ct)end end end end end;local cu=cq()local cv=function()local cw=nil;return function(cx)local cr=ar["MVGameControllerBase.get_GameMode"]()local cs=d.GetInt(cr.Unbox)if cs~=2 then local n=ar["ThemeRepository.get_Instance"]()local cb=Il2Cpp.String(cx)if cw~=nil then ar["ThemeRepository.DestroyTemporary"](n,cw)cw=nil end;if cx~="Current"then cw=ar["ThemeRepository.CreateTemporaryThemeVisualization"](n,cb)end else end end end;local cy=cv()local cz=function()local cA=Il2Cpp.SafePointer(1)return function(b4)local n=ar["AwayMonitor.instance"].get()d.SetBool(cA,not b4)ar["AwayMonitor.idleKickEnabled"].set(n,cA)end end;local cB=cz()local cC=function()local cD=c+0x3C7355+4;local cE=c+0x4A2E4F+4;local cF=c+0x3C54FF+4;local cG=d.NewFloat(0.0625)local cH=ByteArray(4)d.SetPointer(cH.Pointer,cG.Pointer)Process.WriteMemory(cD,cH)Process.WriteMemory(cE,cH)Process.WriteMemory(cF,cH)return function(q)d.SetFloat(cG,q)end end;local cI=cC()local cJ=function()local cK=c+0x30357F+3;local cL=ByteArray(4)return function(q)d.SetFloat(cL,q)Process.WriteMemory(cK,cL)end end;local cM=cJ()local cN=function()local cO=c+0x1EB4AE+2;local cP=ByteArray(1)return function(b4)d.SetBool(cP,b4)Process.WriteMemory(cO,cP)end end;local cQ=cN()local cR=function()local cS=c+0x3D41E0;local cT=c+0x3D3F20;local bH={ByteArray({0xC3}),ByteArray({0x55})}return function(b4)if b4 then Process.WriteMemory(cS,bH[1])Process.WriteMemory(cT,bH[1])else Process.WriteMemory(cS,bH[2])Process.WriteMemory(cT,bH[2])end end end;local cU=cR()local cV=function()local cW=c+0x4A4741+4;local cX=c+0x4A475A+4;local cY=c+0x4A466B+4;local cZ=d.NewFloat(0.005)local cH=ByteArray(4)d.SetPointer(cH.Pointer,cZ.Pointer)Process.WriteMemory(cW,cH)Process.WriteMemory(cX,cH)Process.WriteMemory(cY,cH)return function(q)d.SetFloat(cZ,q)end end;local c_=cV()local d0=function()return function()local d1=ar["MVGameControllerBase.get_EditModeUI"]()local d2=ar["MVGameControllerBase.get_WOCM"]()local d3=ar["DesktopEditModeController.contextMenuController"].get(d1)local d4=ar["ContextMenuController.woID"].get(d3)local d5=ar["MVWorldObjectClientManager.GetWorldObject"](d2,d4.Unbox)return d5 end end;local d6=d0()local d7=function()local d8=c+0x259508;local bo=c+0x259F10;local d9=ByteArray({0x55,0x89,0xE5,0x53,0x51,0x8B,0x45,0x0C,0x8D,0x1D,0x2E,0x00,0x00,0x00,0x8B,0x0B,0x89,0x48,0x44,0x8B,0x4B,0x04,0x89,0x48,0x48,0x6A,0x00,0x50,0xFF,0x75,0x08,0xE8,0xDC,0xFF,0xFF,0xFF,0x83,0xC4,0x0C,0x8B,0x45,0x08,0x59,0x5B,0xC9,0xC3,0x00,0x00,0x00,0x40,0x00,0x00,0x00,0x40})local da=ByteArray(4)local be=Process.Alloc(nil,d9.Length,Process.AllocationType.COMMIT|Process.AllocationType.RESERVE,Process.MemoryProtection.EXECUTE_READWRITE)local bt=e.jump(be:ToInt()+0X1F,bo:ToInt())d9:SetFromByteArray(0x20,bt)d.SetInt(d9.Pointer+0xA,be:ToInt()+0x2E)local bu=e.jump(d8:ToInt(),be:ToInt())local db=e.jump(d8:ToInt(),bo:ToInt())Process.WriteMemory(be,d9)return function(b4,dc)if b4~=nil then if b4 then Process.WriteMemory(d8+1,bu)else Process.WriteMemory(d8+1,db)end end;if dc~=nil then d.SetFloat(da,dc[1])Process.WriteMemory(be+0x2E,da)d.SetFloat(da,dc[2])Process.WriteMemory(be+0x2E+4,da)end end end;local dd=d7()local de=function(df)local dg=nil;local dh=true;Il2Cpp.RegisterInUpdate("KoGaMaPlugin.CustomTexture",function()if dh then if dg==nil then local df=Il2Cpp.String(df)local di=Il2Cpp.Primitives.NewBool(false)dg=aP["UnityEngine.Networking.UnityWebRequestTexture.GetTexture"](df,di)aP["UnityEngine.Networking.UnityWebRequest.SendWebRequest"](dg)else local dj=aP["UnityEngine.Networking.UnityWebRequest.get_isDone"](dg)local dk=Il2Cpp.Primitives.GetBool(dj.Unbox)if dk then local dl=aP["UnityEngine.Networking.DownloadHandler.GetContent"](dg)local dm=ar["MVGameControllerBase.get_MaterialLoader"]()ar["MaterialLoader.SetMainTexture"](dm,dl)ar["MaterialLoader.SetupMaterials"](dm)dh=false;Il2Cpp.UnregisterInUpdate("KoGaMaPlugin.CustomTexture")end end end end)end;local dn=function(df)local dg=nil;local dh=true;Il2Cpp.RegisterInUpdate("KoGaMaPlugin.CustomCrossHair",function()if dh then if dg==nil then local df=Il2Cpp.String(df)local di=Il2Cpp.Primitives.NewBool(false)dg=aP["UnityEngine.Networking.UnityWebRequestTexture.GetTexture"](df,di)aP["UnityEngine.Networking.UnityWebRequest.SendWebRequest"](dg)else local dj=aP["UnityEngine.Networking.UnityWebRequest.get_isDone"](dg)local dk=Il2Cpp.Primitives.GetBool(dj.Unbox)if dk then local dl=aP["UnityEngine.Networking.DownloadHandler.GetContent"](dg)local dp=ar["MVGameControllerBase.get_PlayModeUI"]()local dq=ar["DesktopPlayModeController.GetCrossHair"](dp)local dr=ar["CrossHair.crossHair"].get(dq)local ds=ay["UnityEngine.UI.Image.get_sprite"](dr)local dt=J["UnityEngine.Sprite.get_pivot"](ds)local du=J["UnityEngine.Sprite.get_rect"](ds)local dv=J["UnityEngine.Sprite.Create"](dl,du.Unbox,dt.Unbox)ay["UnityEngine.UI.Image.set_sprite"](dr,dv)dh=false;Il2Cpp.UnregisterInUpdate("KoGaMaPlugin.CustomCrossHair")end end end end)end;local dw=function()local t=Il2Cpp.Domain.MainDomain;local L=t:AssemblyOpen("Assembly-CSharp.dll")local M=L.Image;local dx=Il2Cpp.get_Corlib()local u=t:AssemblyOpen("UnityEngine.CoreModule.dll")local v=u.Image;local dy=Il2Cpp.Class.FromName(M,"","MVInputWrapper")local dz=dy:GetFieldFromName("inputMap")local dA=Il2Cpp.Class.FromName(M,"","DesktopPlayMode")local dB=dA:GetFieldFromName("keyMapping")local dC=Il2Cpp.Class.FromType(dB.Type)local dD=dC:GetMethodFromName("get_Item",1)local dE=Il2Cpp.Class.FromName(dx,"System","Enum")local dF=dE:GetMethodFromName("Parse",2)local dG=Il2Cpp.Class.FromName(M,"","KogamaControls")local dH=Il2Cpp.Class.FromName(v,"UnityEngine","KeyCode")local dI={}dI["MVInputWrapper.inputMap"]=o(dz,true)dI["DesktopPlayMode.keyMapping"]=o(dB,false)dI["Dictionary.get_Item"]=j(dD,false)dI["Enum.Parse"]=j(dF,true)local dJ={["comboxbox_keybind1"]={["Items"]={"Jump","MoveForward","MoveBackwards","MoveLeft","MoveRight","Fire"},["SelectItem"]="Jump",["SelectIndex"]=0},["textinput_keybind1"]={["Text"]=""}}return{["OnGUI"]=function(self)local dK=dJ["comboxbox_keybind1"]local dL=dJ["textinput_keybind1"]GUI.ComboBox("##comboxbox_keybind1",dK)GUI.TextInput("##textinput_keybind1",dL)if GUI.Button("Change##button_keybind1")then self.Keybind(dK.SelectItem,dL.Text)end end,["Keybind"]=function(dM,dN)local dO=dI["MVInputWrapper.inputMap"].get()local dP=dI["DesktopPlayMode.keyMapping"].get(dO)local dQ=dI["Enum.Parse"](dG.Type.Object,Il2Cpp.String(dM))local dR=dI["Enum.Parse"](dH.Type.Object,Il2Cpp.String(dN))local dS=dI["Dictionary.get_Item"](dP,dQ.Unbox)Il2Cpp.Primitives.SetInt(dS.Pointer+0x10,Il2Cpp.Primitives.GetInt(dR.Unbox))end}end;local dT=dw()local dU=function()local dV={}dV.Checked=false;dV.Clicked=false;return dV end;local dJ={["checkbox1"]=dU(),["checkbox2"]=dU(),["checkbox3"]=dU(),["checkbox4"]=dU(),["checkbox5"]=dU(),["checkbox6"]=dU(),["checkbox7"]=dU(),["checkbox8"]=dU(),["checkbox9"]=dU(),["checkbox10"]=dU(),["checkbox11"]={["Checked"]=true},["checkbox12"]=dU(),["checkbox13"]=dU(),["checkbox14"]=dU(),["checkbox15"]=dU(),["checkbox16"]=dU(),["comboxbox2"]={["Items"]={"Current","RoundSquare","Normal","Christmas","Puzzle","Scary","BoxPumpkin","RoundCircleSkull","Cartoon","Triangles","Pumpkin","Animals","Heart","SquareSkull","BoxHalloween","RoundSkull","BoxSkull","Candy","Square","RoundBoxSkull","RoundSquareSkull","Cloudy"},["SelectItem"]="Current",["SelectIndex"]=0},["inputfloat1"]={["Value"]=1,["Style.Width"]=70,["Format"]="%.2f"},["dragint1"]={["Value"]=60,["Style.Width"]=120,["Min"]=0},["inputfloat2"]={["Value"]=4,["Style.Width"]=70,["Format"]="%.2f"},["inputfloat3"]={["Value"]=3,["Style.Width"]=70,["Format"]="%.2f"},["inputint1"]={["Value"]=1280,["Style.Width"]=90},["inputint2"]={["Value"]=780,["Style.Width"]=90},["comboxbox1"]={["Items"]={"ExclusiveFullScreen","FullScreenWindow","MaximizedWindow","Windowed"},["SelectItem"]="Windowed",["SelectIndex"]=3},["plotlines1"]={["Values"]={}},["plotlines2"]={["Values"]={}},["inputfloat4"]={["Value"]=0.0625,["Style.Width"]=100,["Format"]="%.6f"},["inputfloat5"]={["Value"]=15,["Style.Width"]=100,["Format"]="%.2f"},["inputfloat6"]={["Value"]=0.005,["Style.Width"]=100,["Format"]="%.5f"},["inputfloat7"]={["Value"]=2,["Style.Width"]=100,["Format"]="%.2f"},["inputfloat8"]={["Value"]=2,["Style.Width"]=100,["Format"]="%.2f"},["textinput1"]={["Text"]="",["Width"]=250},["textinput2"]={["Text"]="",["Width"]=250}}local dW={["timing"]=0,["fps_value"]=0,["ping_value"]=0,["fps_values_index"]=0,["fps_values_len"]=30,["ping_values_index"]=0,["ping_values_len"]=30}local dX=function()b:Render(function(dY)if dY then local dZ=dJ.checkbox1;local d_=dJ.checkbox2;local e0=dJ.inputfloat1;local e1=dJ.dragint1;local e2=dJ.checkbox3;local e3=dJ.checkbox4;local e4=dJ.comboxbox1;local e5=dJ.checkbox5;local e6=dJ.inputfloat2;local e7=dJ.inputfloat3;local e8=dJ.inputint1;local e9=dJ.inputint2;local ea=dJ.checkbox6;local eb=dJ.checkbox7;local ec=dJ.checkbox8;local ed=dJ.checkbox9;local ee=dJ.checkbox10;local ef=dJ.checkbox11;local eg=dJ.plotlines1;local eh=dJ.plotlines2;local ei=dJ.comboxbox2;local ej=dJ.checkbox12;local ek=dJ.inputfloat4;local el=dJ.inputfloat5;local em=dJ.checkbox13;local en=dJ.checkbox14;local eo=dJ.inputfloat6;local ep=dJ.checkbox15;local eq=dJ.inputfloat7;local er=dJ.inputfloat8;local es=dJ.checkbox16;local et=dJ.textinput1;local eu=dJ.textinput2;if GUI.CollapsingHeader("Build##collapsingheader_Build")then GUI.CheckBox("##checkbox1",dZ)if dZ.Clicked then b5(dZ.Checked)end;GUI.SameLine()GUI.Label("No Build Limit")GUI.CheckBox("##checkbox2",d_)if d_.Clicked then bl(d_.Checked)end;GUI.SameLine()GUI.Label("Free Materials")GUI.CheckBox("##checkbox3",e2)if e2.Clicked then bg(e2.Checked)end;GUI.SameLine()GUI.Label("Custom Face Model")GUI.CheckBox("##checkbox4",e3)if e3.Clicked and not e3.Checked then bp(false,0)end;GUI.SameLine()GUI.Label("Custom Model Size")if e3.Checked then GUI.Label("Model Size")GUI.SameLine()GUI.InputFloat("##inputfloat1",e0)if e0.Changed then if e0.Value>0 and e0.Value<50 then bp(true,e0.Value)end end end;GUI.CheckBox("##checkbox5",e5)GUI.SameLine()GUI.Label("Rotation Custom")if e5.Clicked then if e5.Checked then c9("< X > Press to rotate model on an X axis\n< Y > Press to rotate model on an Y axis\n< Z > Press to rotate model on an Z axis")end;bw(e5.Checked)end;if e5.Checked then if Process.KeyIsDown(90)then bw(nil,{0,1,0})elseif Process.KeyIsDown(89)then bw(nil,{1,0,0})elseif Process.KeyIsDown(88)then bw(nil,{0,0,1})end end;GUI.CheckBox("##checkbox6",ea)GUI.SameLine()GUI.Label("Free Edit Speed Movement")if ea.Clicked then bI(ea.Checked)end;GUI.CheckBox("##checkbox10",ee)GUI.SameLine()GUI.Label("Unlimited Config")if ee.Clicked then cp(ee.Checked)end;GUI.Label("Custom Grid")GUI.SameLine()GUI.InputFloat("##inputfloat4",ek)if ek.Changed and ek.Value>0 then cI(ek.Value)end;GUI.Label("Rotation Custom Speed")GUI.SameLine()GUI.InputFloat("##inputfloat5",el)if el.Changed and el.Value>0 then cM(el.Value)end;GUI.CheckBox("##checkbox14",en)GUI.SameLine()GUI.Label("MultiSelect BETA")if en.Clicked then cU(en.Checked)end;GUI.Label("Custom Speed Translate")GUI.SameLine()GUI.InputFloat("##inputfloat6",eo)if eo.Changed and eo.Value>0 and eo.Value<0.5 then c_(eo.Value)end;GUI.CheckBox("##checkbox15",ep)GUI.SameLine()GUI.Label("Edit Mode Speed Hack")if ep.Clicked then dd(ep.Checked,nil)end;if ep.Checked then GUI.Label("Y Speed")GUI.SameLine()GUI.InputFloat("##inputfloat7",eq)GUI.Label("XZ Speed")GUI.SameLine()GUI.InputFloat("##inputfloat8",er)if eq.Changed or er.Changed then dd(nil,{math.min(eq.Value,20),math.min(er.Value,20)})end end end;if GUI.CollapsingHeader("PvP##collapsingheader_PvP")then GUI.Label("FPS")GUI.SameLine()GUI.DragInt("##dragint1",e1)if e1.Changed then if e1.Value>15 then aX.Application_set_targetFrameRate(e1.Value)aX.QualitySettings_set_vSyncCount(0)end end;GUI.Label("Aspect Ration")GUI.SameLine()GUI.InputFloat("##inputfloat2",e6)GUI.SameLine()GUI.Label(" : ")GUI.SameLine()GUI.InputFloat("##inputfloat3",e7)GUI.SameLine()if GUI.Button("OK##button1")then if e6.Value>0 and e7.Value>0 then a_(e6.Value/e7.Value)end end;GUI.Label("Resolution")GUI.SameLine()GUI.InputInt("##inputint1",e8)GUI.SameLine()GUI.Label(" x ")GUI.SameLine()GUI.InputInt("##inputint2",e9)GUI.ComboBox("##comboxbox1",e4)GUI.SameLine()if GUI.Button("OK##button2")then if e8.Value>0 and e9.Value>0 then bE(e8.Value,e9.Value,e4.SelectIndex)end end;GUI.CheckBox("##checkbox13",em)GUI.SameLine()GUI.Label("Kill Count")if em.Clicked then cQ(em.Checked)end end;if GUI.CollapsingHeader("Texture##collapsingheader_PvP")then GUI.TextInput("##textinput1",et)if GUI.Button("Custom Texture Materials ##button4")then de(et.Text)end;GUI.TextInput("##textinput2",eu)if GUI.Button("Texture Crosshair ##button5")then dn(eu.Text)end end;if GUI.CollapsingHeader("Interface##collapsingheader_Interface")then dT:OnGUI()GUI.CheckBox("##checkbox7",eb)GUI.SameLine()GUI.Label("No Chat")if eb.Clicked then bL(eb.Checked)end;GUI.CheckBox("##checkbox8",ec)GUI.SameLine()GUI.Label("No Notification")if ec.Clicked then bO(ec.Checked)end end;if GUI.CollapsingHeader("Quality##collapsingheader_Quality")then GUI.CheckBox("##checkbox9",ed)GUI.SameLine()GUI.Label("Water Reflective")if ed.Clicked then bU(ed.Checked)end;GUI.CheckBox("##checkbox11",ef)GUI.SameLine()GUI.Label("Theme")if ef.Clicked then cu(ef.Checked)end;GUI.ComboBox("##comboxbox2",ei)GUI.SameLine()local ev=GUI.Button("OK##button3")if ef.Checked and ev then cy(ei.SelectItem)end;GUI.CheckBox("##checkbox12",ej)GUI.SameLine()GUI.Label("Anti AFK")if ej.Clicked then cB(ej.Checked)end end;if Il2Cpp.Thread.Current.Pointer~=Il2Cpp.Pointer.Nil then dW.timing=dW.timing+b_["get_deltaTime"]()if dW.timing>0.3 then dW.fps_value=b_:FPS()dW.ping_value=c8()dW.timing=0;if dW.fps_values_index<dW.fps_values_len then dW.fps_values_index=dW.fps_values_index+1;eg.Values[dW.fps_values_index]=dW.fps_value else for ew=1,dW.fps_values_len-1,1 do eg.Values[ew]=eg.Values[ew+1]end;eg.Values[dW.fps_values_len]=dW.fps_value end;if dW.ping_values_index<dW.ping_values_len then dW.ping_values_index=dW.ping_values_index+1;eh.Values[dW.ping_values_index]=dW.ping_value else for ew=1,dW.ping_values_len-1,1 do eh.Values[ew]=eh.Values[ew+1]end;eh.Values[dW.ping_values_len]=dW.ping_value end end end;GUI.CheckBox("##checkbox16",es)GUI.SameLine()if es.Checked then GUI.Label("Light")else GUI.Label("Dark")end;GUI.Label(string.format("FPS: %.0f",dW.fps_value))GUI.SameLine()GUI.PlotLines("##plotlines1",eg)GUI.Label(string.format("Ping: %dms",dW.ping_value))GUI.SameLine()GUI.PlotLines("##plotlines2",eh)GUI.Label("KoGaMa Version: "..bY())GUI.Label("Helper: Henrique")GUI.Label("Created By Maury")if es.Clicked then if es.Checked then b:StyleLight()else b:StyleDark()end end end end)end;Il2Cpp.RegisterInOneUpdate(function()b=Window("KoGaMa Plugin")local ex=Size(400,300)b.Size=ex;Il2Cpp.RegisterInUpdate("KoGaMa Plugin UI",dX)end)end
